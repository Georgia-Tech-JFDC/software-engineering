{% extends 'base.html' %}

{% block title %}RSO Document Checker - JFDC{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="bg-black py-20 border-b border-yellow-600">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-5xl md:text-6xl font-bold gradient-text mb-4 din-font">RSO Document Checker</h1>
        <p class="text-xl text-gray-400 din-font">Upload your documents for verification</p>
    </div>
</section>

<!-- Upload Section -->
<section class="bg-black py-20 min-h-screen">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-gray-900 border border-yellow-600 rounded-xl p-8 shadow-2xl">

            <form id="upload-form" action="#" method="post" enctype="multipart/form-data" class="space-y-8">
                {% csrf_token %}

                <!-- Drag & Drop Area -->
                <div id="drop-zone"
                    class="border-2 border-dashed border-yellow-600 rounded-xl p-12 text-center cursor-pointer hover:bg-gray-800 transition duration-300 group relative">
                    <input type="file" id="file-input" name="document"
                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" multiple>

                    <div class="space-y-4 pointer-events-none">
                        <div
                            class="w-20 h-20 mx-auto bg-gray-800 rounded-full flex items-center justify-center group-hover:scale-110 transition duration-300">
                            <i class="fas fa-cloud-upload-alt text-yellow-500 text-4xl"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white din-font">Drag & Drop Files Here</h3>
                        <p class="text-gray-400">or click to browse from your computer</p>
                        <p class="text-sm text-gray-500 mt-2">Supported formats: PDF, DOCX, XLSX</p>
                    </div>
                </div>

                <!-- Selected Files List -->
                <div id="file-list" class="hidden space-y-3">
                    <h4 class="text-yellow-500 font-bold din-font mb-2">Selected Files:</h4>
                    <!-- Files will be added here via JS -->
                </div>

                <!-- Submit Button -->
                <div class="flex justify-center pt-4">
                    <button type="submit"
                        class="bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-4 px-12 rounded-full text-xl transition duration-300 transform hover:scale-105 shadow-lg flex items-center">
                        <span>Submit Documents</span>
                        <i class="fas fa-paper-plane ml-3"></i>
                    </button>
                </div>
            </form>

        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const fileList = document.getElementById('file-list');

        // Highlight drop zone on drag over
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            dropZone.classList.add('bg-gray-800', 'border-yellow-400');
        }

        function unhighlight(e) {
            dropZone.classList.remove('bg-gray-800', 'border-yellow-400');
        }

        // Handle file selection
        fileInput.addEventListener('change', handleFiles);

        function handleFiles(e) {
            const files = this.files;
            updateFileList(files);
        }

        function updateFileList(files) {
            if (files.length > 0) {
                fileList.classList.remove('hidden');
                fileList.innerHTML = '<h4 class="text-yellow-500 font-bold din-font mb-2">Selected Files:</h4>';

                Array.from(files).forEach(file => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'flex items-center justify-between bg-gray-800 p-3 rounded-lg border border-gray-700';
                    fileItem.innerHTML = `
                        <div class="flex items-center">
                            <i class="fas fa-file-alt text-yellow-500 mr-3"></i>
                            <span class="text-gray-300">${file.name}</span>
                        </div>
                        <span class="text-gray-500 text-sm">${formatBytes(file.size)}</span>
                    `;
                    fileList.appendChild(fileItem);
                });
            } else {
                fileList.classList.add('hidden');
            }
        }

        function formatBytes(bytes, decimals = 2) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
        }
    });
</script>
{% endblock %}